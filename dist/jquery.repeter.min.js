!function(e,t,l,n){"use strict";function i(t,l){this.element=t,this.template=null,this.items={},this.opt=e.extend(!0,{},r,l),this._name=o,this.init()}function s(t,l,n){n?t.addClass(n).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(l){e(t).remove()}):e(t,l.element).remove()}var o="repeter",r={addBtnSelector:".add",remBtnSelector:".remove",tplSelector:".template",formSelector:"form",elements:{"class":"element",insertIn:null,removeClasses:null,mirror:{selector:null,tplSelector:null,removeClasses:null}}};e.extend(i.prototype,{init:function(){var t=this;return this.template=e(this.element).find(this.opt.tplSelector)[0],this._template=e(this.element).find(this.opt.elements.mirror.tplSelector)[0],e(t.element).on("click",t.opt.addBtnSelector,function(){t.addItem()}).on("click","."+t.opt.elements["class"]+" "+t.opt.remBtnSelector,function(){t.removeItem(this)}),this},addItem:function(){var t=this,l=this.template,n=this._template,i=e(this.element).find("."+this.opt.elements["class"]).length,s="SCRIPT"==l.nodeName?e(l).tmpl({numElement:i}):e(l).clone().removeClass(t.opt.tplSelector);t.items["item"+i]=e.tmplItem(s),s.addClass(t.opt.elements["class"]+" r-ele-"+i).data("r-ele",i);var o=t.opt.elements.insertIn||t.opt.elements.mirror.selector;if(o){var r=null;if(t.opt.elements.mirror.selector)if(n){var a="SCRIPT"==n.nodeName?e(n).tmpl({numElement:i}):e(n).clone().removeClass(t.opt.tplSelector);r=a.addClass("r-ele-"+i).data("r-ele",i)}else r=s.clone().removeClass(t.opt.elements["class"]),r.find(".remove")[0].remove();e(o).append(r||s)}if(t.opt.elements.insertIn&&!t.opt.elements.mirror.selector||s.insertBefore(l),e.fn.formValidation||e.fn.validator){var m=e(t.element).closest(t.opt.formSelector);s.find("[disabled]").prop("disabled",!1),e.fn.validator&&m.data("bs.validator")&&m.validator("reloadFields"),e.fn.formValidation&&m.data("formValidation")&&s.find("input,textarea,select").filter(":visible").each(function(){m.formValidation("addField",this.name)})}return{parent:t.element,addedElement:s,removedElement:null}},removeItem:function(t){var l=this,t="number"==typeof t?e("r-ele-"+t,l.element):t,n=e(t).closest("."+l.opt.elements["class"],l.element),i=e(n).data("r-ele"),o=e(this.element).find("."+this.opt.elements["class"]).length,r=e(l.opt.elements.mirror.selector).find(".r-ele-"+i);(e.fn.formValidation||e.fn.validator)&&t.prev().find("select,input,textarea,button").last().focus(),s(n,l,l.opt.elements.removeClasses),r&&s(r,l,l.opt.elements.mirror.removeClasses);for(var a=i;o-1>a;a++)l.items["item"+a]=l.items["item"+(a+1)],l.items["item"+a].data.numElement=a,l.items["item"+a].update(),e(l.items["item"+a].nodes).data("r-ele",a).addClass(l.opt.elements["class"]+" r-ele-"+a);if(r)for(var a=i;o>a;a++)e(".r-ele-"+a,l.opt.elements.mirror.selector).removeClass("r-ele-"+a).addClass("r-ele-"+(a-1));return delete l.items["item"+(o-1)],{parent:l,addedElement:null,removedElement:n}}}),e.fn[o]=function(t){var l=arguments;if(t===n||"object"==typeof t)return this.each(function(){e.data(this,"plugin_"+o)||e.data(this,"plugin_"+o,new i(this,t))});if("string"==typeof t&&"_"!==t[0]&&"init"!==t){var s;return this.each(function(){var n=e.data(this,"plugin_"+o);n instanceof i&&"function"==typeof n[t]&&(s=n[t].apply(n,Array.prototype.slice.call(l,1))),"destroy"===t&&e.data(this,"plugin_"+o,null)}),s!==n?s:this}}}(jQuery,window,document);