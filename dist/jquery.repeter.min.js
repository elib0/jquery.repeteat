!function(e,t,n,l){"use strict";function o(t,n){this.element=t,this.opt=e.extend(!0,{},a,n),this._defaults=a,this._name=s,this.init()}function r(t,n){var l=e(t).data("r-ele"),o=e("."+n.opt.elements["class"],n.element).length;(e.fn.formValidation||e.fn.validator)&&t.prev().find("select,input,textarea,button").last().focus(),e(t).remove(),n.opt.elements.mirror.selector&&e(".r-ele-"+l,n.opt.elements.mirror.selector).remove();for(var r=l+1;o>=r;r++)e(".r-ele-"+r,n.element).data("r-ele",r-1).removeClass("r-ele-"+r).addClass("r-ele-"+(r-1))}var s="repeter",a={addBtnSelector:".add",remBtnSelector:".remove",tplSelector:".template",formSelector:"form",elements:{"class":"element",insertIn:null,removeClasses:"animated bounceOutLeft",mirror:{selector:null,tplSelector:null}}};e.extend(o.prototype,{init:function(){var t=this;return e(t.element).on("click",t.opt.addBtnSelector,function(){t.addItem()}).on("click","."+t.opt.elements["class"]+" "+t.opt.remBtnSelector,function(){t.removeItem(this)}),this},addItem:function(){var t=this,n=e(t.element).find(t.opt.tplSelector)[0],l=e(t.element).find("."+t.opt.elements["class"]).length,o=e(t.element).find(t.opt.elements.mirror.tplSelector)[0],r="SCRIPT"==n.nodeName?e(n).tmpl({numElement:l}):e(n).clone().removeClass(t.opt.tplSelector);r.addClass(t.opt.elements["class"]+" r-ele-"+l).data("r-ele",l);var s=t.opt.elements.insertIn||t.opt.elements.mirror.selector;if(s){var a=null;if(t.opt.elements.mirror.selector)if(o){var i="SCRIPT"==o.nodeName?e(o).tmpl({numElement:l}):e(o).clone().removeClass(t.opt.tplSelector);i.addClass(t.opt.elements["class"]+" r-ele-"+l).data("r-ele",l),a=i.removeClass(t.opt.elements["class"])}else a=r.clone().removeClass(t.opt.elements["class"]),a.find(".remove")[0].remove();e(s).append(a||r)}if(t.opt.elements.insertIn&&!t.opt.elements.mirror.selector||r.insertBefore(n),e.fn.formValidation||e.fn.validator){var m=e(t.element).closest(t.opt.formSelector);r.find("[disabled]").prop("disabled",!1),e.fn.validator&&m.data("bs.validator")&&m.validator("reloadFields"),e.fn.formValidation&&m.data("formValidation")&&r.find("input,textarea,select").filter(":visible").each(function(){m.formValidation("addField",this.name)})}return{parent:t.element,addedElement:r,removedElement:null}},removeItem:function(t){var n=this,t="number"==typeof t?e("r-ele-"+t,n.element):t,l=e(t).closest("."+n.opt.elements["class"]);if(n.opt.elements.removeClasses){var o="webkitAnimationEnd oanimationend msAnimationEnd animationend";l.addClass(n.opt.elements.removeClasses).one(o,function(e){return r(l,n),l.removeClass(n.opt.elements.removeClasses),{parent:n,addedElement:null,removedElement:t}})}else l.fadeOut(250,function(){r(l,n)})}}),e.fn[s]=function(t){return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new o(this,t))})}}(jQuery,window,document);