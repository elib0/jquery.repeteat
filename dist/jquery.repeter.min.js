!function(e){e.fn.repeter=function(n){var l=this,t={"class":"element",mirrorIn:null,insertIn:null},r=e.extend({addBtnClass:".add",remBtnClass:".remove",tplClass:".template",formValidation:!1,formSelector:"form",elements:t},n),a=r.elements["class"]||t["class"];return l.on("click",r.addBtnClass,function(){var n=l.find(r.tplClass)[0],t=l.find("."+a).length,s="SCRIPT"==n.nodeName?e(n).tmpl({numElement:t}):e(n).clone().removeClass(r.tplClass);s.addClass(a+" r-ele-"+t).data("r-ele",t);var i=r.elements.insertIn||r.elements.mirrorIn;if(i){if(r.elements.mirrorIn){var o=s.clone().removeClass(a);o.find(".remove")[0].remove()}e(i).append(o||s)}if(r.elements.insertIn&&!r.elements.mirrorIn||s.insertBefore(n),r.formValidation){var d=l.closest(r.formSelector);s.find("[disabled]").prop("disabled",!1),e.fn.validator&&d.data("bs.validator")&&d.validator("reloadFields"),e.fn.formValidation&&d.data("formValidation")&&s.find("input,textarea,select").filter(":visible").each(function(){d.formValidation("addField",this.name)})}return{parent:l,addedElement:s,removedElement:null}}).on("click","."+a+" "+r.remBtnClass,function(){e(this).closest(".element").fadeOut(250,function(){var n=e(this).data("r-ele"),t=l.find("."+a).length;r.formValidation&&e(this).prev().find("select,input,textarea,button").last().focus(),e(".r-ele-"+n,l).remove(),e(this).remove();for(var s=n+1;s>=t;s++)console.log("enumerando..."),e(".r-ele-"+s,l).removeClass("r-ele-"+s).addClass("r-ele-"+s).tmpl({numElement:s-1});return{parent:l,addedElement:null,removedElement:e(this)}})}),l}}(jQuery);