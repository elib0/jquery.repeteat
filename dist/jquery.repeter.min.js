!function(e){e.fn.repeter=function(t){var n=this,l={"class":"element",mirrorIn:null,insertIn:null},r=e.extend({addBtnClass:".add",remBtnClass:".remove",tplClass:".template",formValidation:!1,formSelector:"form",elements:l},t),a=r.elements["class"]||l["class"];n.on("click",r.addBtnClass,function(){var t=e(this).closest("."+n.attr("class"));s(t)}).on("click","."+a+" "+r.remBtnClass,function(){var t=e(this).closest("."+n.attr("class"));o(this,t)});var s=function(t){var n=e(t).find(r.tplClass)[0],l=e(t).find("."+a).length,s="SCRIPT"==n.nodeName?e(n).tmpl({numElement:l}):e(n).clone().removeClass(r.tplClass);s.addClass(a+" r-ele-"+l).data("r-ele",l);var o=r.elements.insertIn||r.elements.mirrorIn;if(o){if(r.elements.mirrorIn){var i=s.clone().removeClass(a);i.find(".remove")[0].remove()}e(o).append(i||s)}if(r.elements.insertIn&&!r.elements.mirrorIn||s.insertBefore(n),r.formValidation){var d=e(t).closest(r.formSelector);s.find("[disabled]").prop("disabled",!1),e.fn.validator&&d.data("bs.validator")&&d.validator("reloadFields"),e.fn.formValidation&&d.data("formValidation")&&s.find("input,textarea,select").filter(":visible").each(function(){d.formValidation("addField",this.name)})}return{parent:t,addedElement:s,removedElement:null}},o=function(t,l){t="number"==typeof t?e("button.remove","r-ele-"+t):t,e(t,l).closest(".element").fadeOut(250,function(){var s=e(t,l).data("r-ele"),o=n.find("."+a).length;r.formValidation&&e(t,l).prev().find("select,input,textarea,button").last().focus(),e(".r-ele-"+s,n).remove(),e(t,l).remove();for(var i=s+1;o>=i;i++)e(".r-ele-"+i,n).data("r-ele",i-1).removeClass("r-ele-"+i).addClass("r-ele-"+(i-1));return{parent:n,addedElement:null,removedElement:e(t,l)}})};return n}}(jQuery);