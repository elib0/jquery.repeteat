!function(e){e.fn.repeter=function(t){var n=this,l={"class":"element",mirrorIn:null,insertIn:null},r=e.extend({addBtnClass:".add",remBtnClass:".remove",tplClass:".template",formValidation:!1,formSelector:"form",elements:l},t),a=r.elements["class"]||l["class"];return n.on("click",r.addBtnClass,function(){var t=n.find(r.tplClass)[0],l=n.find("."+a).length,i="SCRIPT"==t.nodeName?e(t).tmpl({numElement:l}):e(t).clone().removeClass(r.tplClass);i.addClass(a+" r-ele-"+l).data("r-ele",l);var s=r.elements.insertIn||r.elements.mirrorIn;if(s){if(r.elements.mirrorIn){var o=i.clone();o.find(".remove")[0].remove()}e(s).append(o||i)}if(r.elements.insertIn&&!r.elements.mirrorIn||i.insertBefore(t),r.formValidation){var d=n.closest(r.formSelector);i.find("[disabled]").prop("disabled",!1),e.fn.validator&&d.data("bs.validator")&&d.validator("reloadFields"),e.fn.formValidation&&d.data("formValidation")&&i.find("input,textarea,select").filter(":visible").each(function(){d.formValidation("addField",this.name)})}return{parent:n,addedElement:i,removedElement:null}}).on("click","."+a+" "+r.remBtnClass,function(){e(this).closest(".element").fadeOut(250,function(){var t=e(this).data("r-ele");return r.formValidation&&e(this).prev().find("select,input,textarea,button").last().focus(),e(".r-ele-"+t,n).remove(),e(this).remove(),{parent:n,addedElement:null,removedElement:e(this)}})}),n}}(jQuery);